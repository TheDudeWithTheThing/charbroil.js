// Generated by CoffeeScript 1.3.1
((function(){(function(a,b){var c,d,e,f;return f="charbroil",e=b.document,d={hot_key_css_class:"charbroil-hot",modifier:"ctrl",exclude:[]},c=function(){function c(b,c){this.element=b,this.options=a.extend({},d,c),this._defaults=d,this._name=f,this._letter_score=[],this.init()}return c.name="Charbroil",c.prototype.init=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;this.load_links(),r=this.links;for(h=0,l=r.length;h<l;h++){f=r[h],b=a(f),g=b.html();for(i=0,m=g.length;i<m;i++)d=g[i],c=d.toLowerCase(),typeof this._letter_score[c]=="undefined"&&(this._letter_score[c]=0),this._letter_score[c]++}s=this.links;for(j=0,n=s.length;j<n;j++){f=s[j],b=a(f),e=b.attr("data-charbroil-key");if(!this.is_valid_letter(e))continue;g=b.html(),this.build_char_link(e,g,b)}t=this.links;for(k=0,o=t.length;k<o;k++){f=t[k];if(this.has_charbroil_span(f))continue;g=a(f).html(),e=g[0].toLowerCase();if(!this.is_valid_letter(e))continue;this.build_char_link(e,g,f)}u=this.links;for(q=0,p=u.length;q<p;q++){f=u[q];if(this.has_charbroil_span(f))continue;g=a(f).html(),e=this.find_lowest_score_letter(g.toLowerCase());if(!this.is_valid_letter(e))continue;this.build_char_link(e.toLowerCase(),g.toLowerCase(),f)}return this},c.prototype.is_valid_letter=function(a){return a&&this.options.exclude.indexOf(a)===-1},c.prototype.has_charbroil_span=function(b){return a(b).find("span."+this.options.hot_key_css_class).length>0},c.prototype.build_char_link=function(c,d,e){var f,g,h,i,j,k,l;return d=d.toLowerCase(),this.options.exclude.push(c),i=d.indexOf(c),k=this.build_shortcut_string(c),l=this.build_shortcut_class_name(k),h=this.get_finder_class_name(l),j=a("<span>"+c+"</span>").addClass(this.options.hot_key_css_class),g=d.substring(0,i),f=d.substring(i+1),a(e).addClass(l),a(e).html(j),a("."+h+" span").before(g).after(f),key(k,function(c,d){return l="charbroil-"+d.shortcut.replace("+","-"),b.location=a("."+l).attr("href")})},c.prototype.load_links=function(){return this.links=a(this.element).find("a")},c.prototype.find_lowest_score_letter=function(a){var b,c,d,e,f;for(e=0,f=a.length;e<f;e++)b=a[e],this.is_valid_letter(b)&&(!d||d&&this._letter_score[b]<d)&&(c=b,d=this._letter_score[b]);return c},c.prototype.last_char=function(a){return a.charAt(a.length(-1))},c.prototype.build_shortcut_string=function(a){var b,c;return this.options.modifier instanceof Array?(c=function(){var c,d,e,f;e=this.options.modifier,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b+"+"+a);return f}.call(this),c.join(",")):this.options.modifier+"+"+a},c.prototype.build_shortcut_class_name=function(a){var b,c;return b=function(){var b,d,e,f;e=a.split(/,/),f=[];for(b=0,d=e.length;b<d;b++)c=e[b],f.push("charbroil-"+c.replace(/\+/g,"-"));return f}(),b.join(" ")},c.prototype.get_finder_class_name=function(a){var b;return b=a.split(" "),b[0]},c}(),a.fn[f]=function(b){return this.each(function(){if(!a.data(this,"plugin_"+f))return a.data(this,"plugin_"+f,new c(this,b))})}})(jQuery,window)})).call(this);